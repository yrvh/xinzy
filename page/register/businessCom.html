<!DOCTYPE html>
<html lang="">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="../../js/mui.min.js"></script>
    <link rel="stylesheet" href="../../css/mui.min.css">
    <title>商务秘书公司</title>
		
		<style type="text/css">
			body {
			    margin: 0;
			    padding: 0;
			    font-size: 16px;
			}
			
			header {
			    position: relative;
			    text-align: center;
			    line-height: 44px;
			    width: 100%;
			    height: 44px;
			    background-color: white;
			    font-weight: bold;
			}
			
			header>img {
			    position: absolute;
			    top: 12px;
			    left: 5px;
			    width: 20px;
			    height: 20px;
			}
			
			header>div {
			    height: 44px;
			    line-height: 44px;
			}
			
			header>div>span {
			    color: #999999;
			}
			
			.next {
			    line-height: 44px;
			    color: #7EB6FF;
			    margin-right: 10px;
			}
			
			.comBox {
			    width: 100%;
			    background-color: white;
			}
			
			.item {
			    position: relative;
			    display: flex;
			    justify-content: space-between;
			    width: 100%;
			    height: 46px;
			    border-top: 1px solid #e7e7e7;
			}
			
			.item>div>span {
			    position: absolute;
			    top: 0;
			    left: 60px;
			    line-height: 46px;
			}
			
			.comBox>div:nth-last-of-type(1) {
			    border: none;
			}
			
			.comTitle {
			    width: 100%;
			    margin: 0;
			    box-sizing: border-box;
			    height: 45px;
			    border: none;
			    line-height: 45px;
			    font-weight: bold;
			    padding: 10px 0 0 15px;
			    line-height: 30px;
			}
			
			.comImg {
			    width: 34px;
			    height: 34px;
			    margin-top: 6px;
			    margin-left: 15px;
			    border-radius: 3px;
			}
			
			.comInfo {
			    width: 26px;
			    height: 26px;
			    margin-top: 14px;
			}
			
			
			/* 重写样式改变MUI单选框的大小 */
			
			
			/* .mui-radio input[type=radio]:before {
			    font-family: Muiicons;
			    font-size: 20px;
			    font-weight: 400;
			    line-height: 1;
			    text-decoration: none;
			    color: #aaa;
			    border-radius: 0;
			    background: 0 0;
			    -webkit-font-smoothing: antialiased;
			    line-height: 54px;
			}
			
			.mui-radio.mui-left label {
			    padding: 0 0 0 7px;
			    line-height: 54px;
			    font-size: 15px;
			}
			
			.mui-radio input[type="radio"] {
			    top: 0;
			}
			
			.mui-radio.mui-left input[type="radio"] {
			    left: 2px;
			} */
			
			.searchBox {
			    position: relative;
			    width: 100%;
			    height: 44px;
			    padding: 7px 0 7px 15px;
			}
			
			.searchIn {
			    position: relative;
			    width: calc(100% - 60px);
			    height: 30px;
			    background-color: white;
			    border-radius: 3px;
			    box-sizing: border-box;
			}
			
			.searchIn>input {
			    position: absolute;
			    top: 0;
			    left: 25px;
			    padding: 0;
			    width: 80%;
			    height: 30px;
			    font-size: 14px;
			    text-align: left;
			    background-color: white;
			}
			
			.searchIn>input::placeholder {
			    font-size: 12px;
			}
			
			.searchImg {
			    position: absolute;
			    top: 7.5px;
			    left: 5px;
			    width: 15px;
			    height: 15px;
			}
			
			.toEmpty {
			    position: absolute;
			    top: 7.5px;
			    right: 10px;
			    width: 15px;
			    height: 15px;
			}
			
			.search {
			    position: absolute;
			    top: 0;
			    right: 15px;
			    line-height: 44px;
			    font-size: 14px;
			    color: #7EB6FF;
			}
			
			.black,
			.black2,
			.black3 {
			    width: 100%;
			    height: 100vh;
			    background-color: rgba(16, 16, 16, 0.1);
			    position: absolute;
			    top: 0;
			    left: 0;
			    z-index: 9;
			    display: none;
			}
			
			
			/* .black3 {
			    display: block;
			} */
			
			#jqmeter-container {
			    width: 270px;
			    margin: 0 auto;
			    margin-top: calc((100vh - 20px)/2);
			}
			
			.black>section,
			.black3>section {
			    position: relative;
			    width: 270px;
			    height: 144px;
			    border-radius: 13px;
			    background-color: white;
			    margin: 0 auto;
			    margin-top: calc((100vh - 144px)/2);
			}
			
			.cancel,
			.downLoad,
			.open,
			.close {
			    position: absolute;
			    bottom: 0;
			    width: 50%;
			    height: 45px;
			    text-align: center;
			    line-height: 45px;
			    border-top: 1px solid #e7e7e7;
			}
			
			.cancel,
			.close {
			    left: 0;
			    color: #666666;
			}
			
			.downLoad,
			.open {
			    right: 0;
			    color: #7EB6FF;
			    border-left: 1px solid #e7e7e7;
			}
			
			.openTips {
			    width: 100%;
			    height: 99px;
			    text-align: center;
			    line-height: 99px;
			    color: rgb(153, 153, 153);
			    font-size: 15px;
			}
			
			.tipTitle {
			    width: 100%;
			    padding-top: 15px;
			    color: #030303;
			    font-weight: 700;
			    text-align: center;
			}
			
			.tipCont {
			    font-size: 12px;
			    color: rgb(153, 153, 153);
			    padding: 0 35px;
			    text-align: center;
			    margin-top: 10px;
			}
			
			
			/* footer {
			    display: flex;
			    justify-content: space-around;
			    position: fixed;
			    bottom: 0;
			    left: 0;
			    width: 100%;
			    height: 50px;
			    background-color: white;
			}
			
			footer div {
			    width: 48%;
			    height: 40px;
			    margin-top: 5px;
			    border: 1px solid #7EB6FF;
			    text-align: center;
			    line-height: 40px;
			    border-radius: 4px;
			}
			
			.open {
			    background-color: #7EB6FF;
			    color: white;
			}
			
			.complete {
			    color: #666666;
			} */
		</style>
</head>

<body>
    <header>
        <img class="back" src="../../img/back_black.png" alt=""> 商务秘书公司
        <!-- <div class="next">完成</div> -->
    </header>

    <!-- 搜索框 -->
    <div class="searchBox">
        <div class="searchIn">
            <img class="searchImg" src="../../img/search.png" alt="">
            <input disabled id="name" type="search" placeholder="请输入公司名称/统一社会信用代码">
            <img class="toEmpty" src="../../img/toEmpty.png" alt="">
        </div>
        <div class="search">搜索</div>
    </div>

    <!-- 接受服务公司列表 -->
    <div class="comBox">
        <div class="comTitle">接受服务公司列表</div>
        <div class="companyBox">
            <!-- <div class="item">
                <div>
                    <img class="comImg" src="../../img/1.png" alt="">
                    <span id="">北海xxxxxxxx有限公司</span>
                </div>
                <img class="comInfo" src="../../img/next.png" alt="">
            </div> -->
        </div>

    </div>

    <!-- <div class="black">
        <section>
            <div class="tipTitle">授权委托协议书</div>
            <div class="tipCont">自行下载打印协议书，并必须本人签字，交给选定的商务秘书公司</div>
            <section class="cancel">取消</section>
            <section class="downLoad">下载</section>
        </section>
    </div>
    <div class="black2">
        <div id="jqmeter-container"></div>
    </div>
    <div class="black3">
        <section>
            <div class="openTips">下载完成，是否打开文件</div>
            <div class="close">完成</div>
            <div class="open">打开</div>

        </section>

    </div> -->

</body>
<script src="../../js/jquery-3.3.1.js"></script>
<script src="../../js/jqmeter.min.js"></script>
<script src="../../js/urlDns.js"></script>

<script type="text/javascript">
	mui.init({
	    swipeBack: true //启用右滑关闭功能
	});
	
	
	// 手机号
	var tel = sessionStorage.getItem('tel');
	// 密码
	var password = sessionStorage.getItem('password');
	// 姓名
	var realname = sessionStorage.getItem('realname');
	// 邮箱
	var email = sessionStorage.getItem('email');
	// 身份证号
	var idCardNum = sessionStorage.getItem('idCardNum');
	// 开户机构
	var accountBank = sessionStorage.getItem('accountBank');
	// 开户名
	var accountName = sessionStorage.getItem('accountName');
	// 开户账号
	var account = sessionStorage.getItem('account');
	// 用户注册的角色
	var userType = sessionStorage.getItem('userType');
	// 选择的开票方式
	var type = localStorage.getItem('type');
	// 两张身份证照片
	var src1 = sessionStorage.getItem('idCardImg1');
	var src2 = sessionStorage.getItem('idCardImg2');
	
	
	// 返回
	$(".back").click(() => {
	    // history.back();
	    location.href = "./selectCompany.html";
	});
	
	
	// 页面加载进来，渲染公司列表
	getCompanyInfo(0, "");
	
	// 获取公司列表的方法
	function getCompanyInfo(type, name) {
	    $.post(urlDns + "/user_app/yz/comlist", {
	        type: type,
	        name: name
	    }, function(data) {
	        // console.log(111);
	        // var data = JSON.stringify(data);
	        // console.log(data);
	        // console.log(data.rows[0].icon);
	        var companyInfo = data.rows;
	        var htmlStr = "";
	        if (companyInfo.length != 0) {
	            for (var i = 0; i < companyInfo.length; i++) {
	                htmlStr += `
	                <div class="item" id="${companyInfo[i].id}">
	                    <div>
	                        <img class="comImg" src="${companyInfo[i].icon}" alt="">
	                        <span>${companyInfo[i].name}</span>
	                    </div>
	                    <img class="comInfo" src="../../img/next.png" alt="">
	                </div>
	                `;
	            }
	            $(".companyBox").html(htmlStr);
	
	        } else {
	            $(".companyBox").html("");
	
	        }
	    });
	}
	
	
	// 清空搜索框
	$(".toEmpty").click(() => {
	    $(".searchIn>input").val("");
	});
	
	// 搜索(目前只有一家商务秘书公司，暂时不给用户进行搜索)
	// $(".search").click(() => {
	//     // alert(111)
	//     var name = $("#name").val();
	//     getCompanyInfo(0, name);
	// });
	
	
	var comids;
	// 点击接受服务单位
	// .on后面加进来的元素不起作用，要用事件代理来解决
	$(document).on("click", ".companyBox .item", function(e) {
	    var comids = $(this).attr("id");
	    sessionStorage.setItem('comids', comids);
	    // page.chooseType();
	    location.href = "./onLineContract.html";
	});
	
	// //弹出系统按钮选择框
	// var page = null;
	// page = {
	//     chooseType: function() {
	//         var m = this;
	//         /* console.log(m);*/
	//         plus.nativeUI.actionSheet({
	//             cancel: "取消",
	//             title: "请选择签订协议方式",
	//             buttons: [
	//                 { title: "线上协议文本" },
	//                 { title: "上传协议图片" }
	//             ]
	//         }, function(e) { //1 是拍照  2 从相册中选择 
	//             switch (e.index) {
	//                 case 1:
	//                     onLine();
	//                     break;
	//                 case 2:
	//                     upLoadPhoto();
	//                     break;
	//             }
	//         });
	//     }
	// }
	
	// function onLine() {
	//     location.href = "./onLineContract.html";
	//     // mui.openWindow({
	//     //     url: "./onLineContract.html",
	//     //     id: "onLineContract",
	//     // });
	// }
	
	// function upLoadPhoto() {
	//     location.href = "./upLoadContract.html";
	// }
	
	// -------------------------------------------------
	// --------------------------------------------------
	
	// // 取消下载
	// $(".cancel").click(() => {
	//     $(".black").css("display", "none");
	// });
	
	// // 确认下载
	// $(".downLoad").click(() => {
	//     $.post(urlDns + "/user_app/yz/showXY", { comid: comids }, (data) => {
	//         console.log(data.xieyi);
	//         dowload(data.xieyi);
	//     });
	// });
	
	// var dtask = null;
	// // 下载的文件名
	// var fileName = "";
	// //下载文件
	// function dowload(url) {
	//     var options = { method: "GET" };
	//     dtask = plus.downloader.createDownload(url, options);
	//     dtask.addEventListener("statechanged", function(task, status) {
	//         $(".black").css("display", "none");
	//         $(".black2").css("display", "block");
	
	//         switch (task.state) {
	//             case 1: // 开始
	//                 console.log("开始下载...");
	//                 break;
	//             case 2: // 已连接到服务器
	//                 console.log("链接到服务器...");
	//                 break;
	//             case 3: // 已接收到数据
	//                 // 进度
	//                 var a = Math.floor(task.downloadedSize / task.totalSize * 100)
	//                 console.log(a)
	//                 $('#jqmeter-container').jQMeter({
	//                     // 总进度
	//                     goal: '$1,00',
	//                     // 已完成的进度
	//                     raised: "$" + a,
	//                     // 进度条方向
	//                     orientation: 'horizontal',
	//                     // 进度条宽高
	//                     width: '270px',
	//                     height: '20px',
	//                     // 背景颜色
	//                     bgColor: "#cccccc",
	//                     // 进度条颜色
	//                     barColor: "#7EB6FF"
	//                 });
	//                 if (a = 100) {
	//                     $('.black2').css("display", "none");
	//                     $(".black3").css("display", "block");
	//                 }
	//                 break;
	//             case 4: // 下载完成
	//                 console.log("下载完成！");
	//                 // console.log(task.totalSize)
	//                 fileName = task.filename;
	//                 break;
	//         }
	
	//     });
	//     dtask.start();
	// }
	
	// // 完成注册，等待审核
	// $(".close").click(() => {
	//     var task = plus.uploader.createUpload(urlDns + "/user_app/yz/add", { method: "POST" },
	//         function(t, status) { //上传完成
	//             if (status == 200) {
	//                 var responseText = JSON.parse(t.responseText).status;
	//                 // console.log(responseText);
	//                 if (responseText == 1) {
	//                     console.log("上传成功：" + responseText.status + "," + responseText.message);
	//                     location.href = "audit.html";
	//                 }
	//             } else {
	//                 alert("上传失败：" + status);
	//                 // wt.close(); //关闭等待提示按钮
	//             }
	//         }
	//     );
	//     //添加其他参数
	//     task.addData("tel", tel);
	//     task.addData("password", password);
	//     task.addData("realname", realname);
	//     task.addData("email", email);
	//     task.addData("idCardNum", idCardNum);
	//     task.addData("accountBank", accountBank);
	//     task.addData("accountName", accountName);
	//     task.addData("account", account);
	//     task.addData("userType", userType);
	//     task.addData("type", type);
	//     task.addData("comids", comids);
	
	//     // 两张身份证
	//     task.addFile(src1, { key: "idCardUpUrl" });
	//     task.addFile(src2, { key: "idCardDownUrl" });
	
	//     task.start();
	
	// });
	
	// // 打开文件
	// $(".open").click(() => {
	//     // console.log(fileName);
	
	
	//     var task = plus.uploader.createUpload(urlDns + "/user_app/yz/add", { method: "POST" },
	//         function(t, status) { //上传完成
	//             if (status == 200) {
	//                 // console.log(t.responseText);
	//                 // console.log(JSON.parse(t.responseText).status)
	
	//                 var responseText = JSON.parse(t.responseText).status;
	//                 // console.log(responseText);
	//                 if (responseText == 1) {
	//                     console.log("上传成功：" + responseText.status + "," + responseText.message);
	//                     // var t = JSON.stringify(t);
	//                     // console.log(t)
	//                     // wt.close(); //关闭等待提示按钮
	//                     // plus.io.resolveLocalFileSystemURL(fileName, function(entry) {
	//                     // console.log(entry.toLocalURL()) //绝对地址      
	//                     // });
	//                     plus.runtime.openFile(fileName, {}, function(e) { //调用第三方应用打开文件
	//                         alert('打开失败');
	//                     });
	
	
	//                     location.href = "audit.html";
	//                 }
	
	//             } else {
	//                 alert("上传失败：" + status);
	//                 // wt.close(); //关闭等待提示按钮
	//             }
	//         }
	//     );
	//     //添加其他参数
	//     task.addData("tel", tel);
	//     task.addData("password", password);
	//     task.addData("realname", realname);
	//     task.addData("email", email);
	//     task.addData("idCardNum", idCardNum);
	//     task.addData("accountBank", accountBank);
	//     task.addData("accountName", accountName);
	//     task.addData("account", account);
	//     task.addData("userType", userType);
	//     task.addData("type", type);
	//     task.addData("comids", comids);
	
	//     // 两张身份证
	//     task.addFile(src1, { key: "idCardUpUrl" });
	//     task.addFile(src2, { key: "idCardDownUrl" });
	
	//     task.start();
	
	// });
</script>

</html>