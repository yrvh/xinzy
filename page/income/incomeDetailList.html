<!DOCTYPE html>
<html lang="">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="../../js/mui.min.js"></script>
    <link rel="stylesheet" href="../../css/mui.min.css">
    <link rel="stylesheet" href="../../css/mescroll.min.css">
    <script src="../../js/mescroll.min.js"></script>
    <link rel="stylesheet" href="../../css/mui.picker.min.css">
    <script src="../../js/mui.picker.min.js"></script>
    <!-- <link rel="stylesheet" href="../../css/mui.poppicker.css"> -->
    <!-- <script src="../../js/mui.poppicker.js"></script> -->
    <title>收入管理详情列表</title>
		
		<style type="text/css">
			body {
			    margin: 0;
			    padding: 0;
			    color: #333333;
			    font-size: 16px;
			}
			
			header {
			    position: fixed;
			    top: 0;
			    left: 0;
			    z-index: 99;
			    text-align: center;
			    line-height: 44px;
			    width: 100%;
			    height: 44px;
			    background-color: white;
			    box-shadow: 0 2px 2px 0 rgba(231, 231, 231, 1);
			}
			
			header>img {
			    position: absolute;
			    top: 12px;
			    left: 5px;
			    width: 20px;
			    height: 20px;
			}
			
			header>div {
			    position: absolute;
			    top: 0;
			    right: 5px;
			    height: 44px;
			    line-height: 44px;
			}
			
			header>div>span {
			    color: #999999;
			}
			
			.next {
			    line-height: 44px;
			    color: #7EB6FF;
			    margin-right: 10px;
			}
			
			.list {
			    margin-top: 64px;
			    margin-bottom: 20px;
			}
			
			.list>div {
			    position: relative;
			    width: 100%;
			    background-color: white;
			    margin-top: 10px;
			}
			
			.list>div:nth-of-type(1) {
			    margin-top: 20px;
			}
			
			.list>div>div {
			    width: 100%;
			    display: flex;
			    justify-content: space-between;
			}
			
			.list>div img {
			    width: 25px;
			    height: 25px;
			    vertical-align: middle;
			}
			
			.list>div>div:nth-of-type(1) {
			    height: 40px;
			    line-height: 40px;
			    border-bottom: 1px solid rgb(240, 240, 240);
			    font-size: 14px;
			    padding: 0 5px 0 15px;
			}
			
			.time {
			    color: #999999;
			}
			
			.amount {
			    height: 30px;
			    line-height: 30px;
			    font-size: 12px;
			    color: #999999;
			    padding: 0 15px 0 15px;
			}
			
			.searchBox {
			    display: none;
			    position: fixed;
			    top: 44px;
			    left: 0;
			    z-index: 99;
			    width: 100%;
			    height: 44px;
			    padding: 7px 0 7px 15px;
			    background-color: #F2F2F2;
			}
			
			.searchIn {
			    position: relative;
			    width: calc(100% - 60px);
			    height: 30px;
			    background-color: white;
			    border-radius: 3px;
			    box-sizing: border-box;
			}
			
			.searchIn>input {
			    position: absolute;
			    top: 0;
			    left: 25px;
			    padding: 0;
			    width: 80%;
			    height: 30px;
			    font-size: 14px;
			    text-align: left;
			    background-color: white;
			}
			
			.searchIn>input::placeholder {
			    font-size: 12px;
			}
			
			.searchImg {
			    position: absolute;
			    top: 7.5px;
			    left: 5px;
			    width: 15px;
			    height: 15px;
			}
			
			.toEmpty {
			    position: absolute;
			    top: 7.5px;
			    right: 10px;
			    width: 15px;
			    height: 15px;
			}
			
			.search {
			    position: absolute;
			    top: 0;
			    right: 15px;
			    line-height: 44px;
			    font-size: 14px;
			    color: #7EB6FF;
			}
			
			footer {
			    display: none;
			    position: fixed;
			    bottom: 0;
			    left: 0;
			    z-index: 99;
			    width: 100%;
			    height: 50px;
			    background-color: white;
			}
			
			.del,
			.submit {
			    position: absolute;
			    top: 0;
			    width: calc((100% - 45px)/2);
			    height: 40px;
			    margin-top: 5px;
			    text-align: center;
			    line-height: 40px;
			    border-radius: 4px;
			}
			
			.del {
			    left: 0;
			    color: #7EB6FF;
			    border: 1px solid #cccccc;
			    margin-left: 15px;
			}
			
			.submit {
			    background-color: #7EB6FF;
			    color: white;
			    right: 0;
			    margin-right: 15px;
			}
			
			.select {
			    display: none;
			    position: absolute;
			    top: 11px;
			    left: 10px;
			    z-index: 10;
			}
			
			.filterBox {
			    position: fixed;
			    top: 88px;
			    left: 0;
			    z-index: 99;
			    display: none;
			    width: 100%;
			    height: 44px;
			    color: rgb(153, 153, 153);
			    background-color: white;
			    padding: 0 5px 0 15px;
			    font-size: 14px;
			    line-height: 44px;
			    border-bottom: 1px solid rgb(240, 240, 240);
			}
			
			.nextImg {
			    position: absolute;
			    top: 8px;
			    right: 5px;
			    width: 25px;
			    height: 25px;
			}
			
			.filterImg {
			    position: relative;
			    top: 2px;
			    width: 15px;
			    height: 15px;
			}
			
			.filterParam {
			    background-color: white;
			}
			
			.selectTime {
			    padding: 0 15px;
			    display: flex;
			    justify-content: space-between;
			    width: 100%;
			    height: 44px;
			    background-color: white;
			    border-bottom: 1px solid rgb(240, 240, 240);
			    line-height: 44px;
			    font-size: 14px;
			}
			
			.timeBox {
			    width: 75%;
			    display: flex;
			    justify-content: space-between;
			}
			
			#startTime,
			#endTime {
			    display: flex;
			    justify-content: space-around;
			    /* position: relative; */
			    width: 40%;
			    height: 30px;
			    border: 1px solid rgb(204, 204, 204);
			    border-radius: 4px;
			    margin-top: 8px;
			}
			
			#startTime>img,
			#endTime>img {
			    width: 16px;
			    height: 16px;
			    margin-top: 5px;
			}
			
			#startTime>span,
			#endTime>span {
			    font-size: 13px;
			    line-height: 30px;
			}
			
			#startDate,
			#endDate {
			    color: #666666;
			}
			
			.selectCom {
			    display: flex;
			    justify-content: space-between;
			    width: calc(100% - 30px);
			    margin-left: 15px;
			    height: 44px;
			    line-height: 44px;
			    border-bottom: 1px solid rgb(240, 240, 240);
			}
			
			.selectCom>div {
			    position: relative;
			}
			
			.selectCom>div span {
			    position: relative;
			    right: 15px;
			}
			
			.selectCom span {
			    font-size: 14px;
			}
			
			.selectCom img {
			    width: 25px;
			    height: 25px;
			    position: absolute;
			    top: 10px;
			    right: -9px;
			}
			
			.okBox {
			    position: relative;
			    width: 100%;
			    height: 44px;
			}
			
			.okBox div {
			    top: 8px;
			    position: absolute;
			    width: calc((100% - 45px)/2);
			    height: 28px;
			    border-radius: 4px;
			    font-size: 14px;
			    text-align: center;
			    line-height: 28px;
			}
			
			.ok {
			    right: 15px;
			    color: white;
			    background-color: #7EB6FF;
			}
			
			.reset {
			    left: 8px;
			    color: #7EB6FF;
			    border: 1px solid rgb(204, 204, 204);
			}
			
			.filterParamBg {
			    display: none;
			    position: absolute;
			    background-color: rgba(0, 0, 0, 0.2);
			    z-index: 10;
			    top: 133px;
			    left: 0;
			    width: 100%;
			    height: calc(100vh - 133px);
			}
			
			.noneParamBg {
			    width: 100%;
			    height: calc(100vh - 267px);
			    position: absolute;
			    bottom: 0;
			    left: 0;
			}
			
			.success {
			    display: none;
			    width: 100%;
			    height: 100vh;
			    position: fixed;
			    top: 0;
			    left: 0;
			    z-index: 9999;
			}
			
			.success>img {
			    width: 120px;
			    height: 120px;
			    margin-left: calc((100% - 120px)/2);
			    margin-top: calc((100vh - 120px)/2);
			}
			
			.select_all {
			    display: none;
			    position: absolute;
			    top: 0;
			    left: 15px;
			    color: #7EB6FF;
			}
			
			.mescroll {
			    position: fixed;
			    top: 0;
			    bottom: 0;
			    height: auto;
			    /*如设置bottom:50px,则需height:auto才能生效*/
			}
		</style>
</head>

<body>
    <header>
        <section class="select_all">全选</section>
        <img class="back" src="../../img/back_black.png" alt="">
        <span style="font-weight: bold;">待提交</span>
        <div class="next">选择</div>
    </header>

    <!-- 搜索框 -->
    <div class="searchBox">
        <div class="searchIn">
            <img class="searchImg" src="../../img/search.png" alt="">
            <input class="searchCont" type="search" placeholder="请输入劳务、服务名称">
            <img class="toEmpty" src="../../img/toEmpty.png" alt="">
        </div>
        <div class="search">搜索</div>
    </div>

    <div class="filterBox">
        <div>
            <img class="filterImg" src="../../img/filter.png" alt="">
            <span>筛选条件：</span>
        </div>
        <img class="nextImg" src="../../img/next.png" alt="">
    </div>
    <div class="filterParamBg">
        <div class="filterParam">
            <div class="selectCom">
                <span>接受服务单位</span>
                <div>
                    <span class="selectComName"></span>
                    <img src="../../img/next.png" alt="">
                </div>

            </div>
            <div class="selectTime">
                <span>录入时间</span>
                <div class="timeBox">
                    <section id="startTime">
                        <span id="startDate"></span>
                        <img src="../../img/calendar.png" alt="">
                    </section>
                    至
                    <section id="endTime">
                        <span id="endDate"></span>
                        <img src="../../img/calendar.png" alt="">
                    </section>

                </div>
            </div>
            <div class="okBox">
                <div class="reset">重置条件</div>
                <div class="ok">确定</div>
            </div>
        </div>
        <div class="noneParamBg"></div>
    </div>



    <!-- 数据列表 -->
    <section class="list">
        <!-- <div>
                        <input class="select" name="hh" value="beihai" type="checkbox">
                        <div class="comTime">
                            <span class="comName">北海xxx有限公司</span>
                            <div class="href">
                                <span class="time">2019-06至2019-07</span>
                                <img src="../../img/next.png" alt="">
                            </div>
                        </div>
                        <div class="amount">
                            <span>快递派件</span>
                            <span>10,000,00</span>
                        </div>
                    </div>
                    <div>
                        <input class="select" name="hh" value="beihai2" type="checkbox">
                        <div class="comTime">
                            <span class="comName">北海xxx有限公司</span>
                            <div class="href">
                                <span class="time">2019-06至2019-07</span>
                                <img src="../../img/next.png" alt="">
                            </div>
                        </div>
                        <div class="amount">
                            <span>外卖送餐员</span>
                            <span>10,000,00</span>
                        </div>
                    </div> -->

    </section>

    <div class="success">
        <img src="../../img/success.png" alt="">
    </div>
    <footer>
        <div class="del">删除</div>
        <div class="submit">提交</div>
    </footer>
</body>
<script src="../../js/jquery-3.3.1.js"></script>
<script src="../../js/urlDns.js"></script>

<script type="text/javascript">
	var pass_app = localStorage.getItem("pass_app");
	var tel_app = localStorage.getItem("tel_app");
	var code_app = localStorage.getItem("code_app");
	// console.log("tel_app：" + tel_app);
	// console.log("pass_app：" + pass_app);
	
	mui.init();
	// 返回
	$(".back").click(() => {
	    history.back();
	});
	
	
	var id = sessionStorage.getItem("id");
	console.log(id)
	
	var page = 1;
	var status = 0;
	
	
	// 标题渲染
	if (id == "noSubmit") {
	    status = 0;
	    $("header span").text("待提交");
	    sessionStorage.setItem("isIn", 1);
	    var htmlStr = "";
	    $.post(urlDns + "/control_app/yz/zf/list", {
	        // 状态  待提交0
	        status: status,
	        // 第几页
	        page: 1,
	        // 一页的条数
	        rows: 20,
	        // 搜索框的内容
	        name: "",
	        // 过滤条件的开始时间和结束时间
	        startdate: "",
	        enddate: "",
	        // 过滤条件的发票抬头
	        comid: "",
	        pass_app: pass_app,
	        tel_app: tel_app,
	        code_app: code_app
	    }, function(data) {
	        console.log(JSON.stringify(data));
	        if (data.result == 0) {
	            // 需要重新登录
	            if (window.plus) {
	                goToLogin("../register/login.html");
	            } else {
	                document.addEventListener('plusready', goToLogin, false);
	            }
	        } else {
	            for (var i = 0; i < data.rows.length; i++) {
	                htmlStr += `
	                <div class="item">
	                    <input class="select" name="hh" value="${data.rows[i].id}" type="checkbox">
	                    <div class="comTime">
	                        <span class="comName">${data.rows[i].comname}</span>
	                        <div class="href" detailId="${data.rows[i].id}">
	                            <span class="time">${data.rows[i].zq}</span>
	                            <img src="../../img/next.png" alt="">
	                        </div>
	                    </div>
	                    <div class="amount">
	                        <span>${data.rows[i].name}</span>
	                        <span>${data.rows[i].fkmoney}</span>
	                    </div>
	                </div>
	            `;
	            }
	            $(".list").html(htmlStr);
	        }
	
	    });
	}
	
	if (id == "noExamine") {
	    status = 2;
	    $("header span").text("待审核");
	    $(".next").css("display", "none");
	    sessionStorage.setItem("isIn", 0);
	    var htmlStr = "";
	    $.post(urlDns + "/control_app/yz/zf/list", {
	        // 状态  待审核2
	        status: status,
	        // 第几页
	        page: 1,
	        // 一页的条数
	        rows: 20,
	        // 搜索框的内容
	        name: "",
	        // 过滤条件的开始时间和结束时间
	        startdate: "",
	        enddate: "",
	        // 过滤条件的发票抬头
	        comid: "",
	        pass_app: pass_app,
	        tel_app: tel_app,
	        code_app: code_app
	    }, function(data) {
	        console.log(JSON.stringify(data));
	        if (data.result == 0) {
	            // 需要重新登录
	            if (window.plus) {
	                goToLogin("../register/login.html");
	            } else {
	                document.addEventListener('plusready', goToLogin, false);
	            }
	        } else {
	            for (var i = 0; i < data.rows.length; i++) {
	                htmlStr += `
	                <div class="item">
	                    <input class="select" name="hh" value="${data.rows[i].id}" type="checkbox">
	                    <div class="comTime">
	                        <span class="comName">${data.rows[i].comname}</span>
	                        <div class="href" detailId="${data.rows[i].id}">
	                            <span class="time">${data.rows[i].zq}</span>
	                            <img src="../../img/next.png" alt="">
	                        </div>
	                    </div>
	                    <div class="amount">
	                        <span>${data.rows[i].name}</span>
	                        <span>${data.rows[i].fkmoney}</span>
	                    </div>
	                </div>
	            `;
	            }
	            $(".list").html(htmlStr);
	        }
	
	    });
	}
	if (id == "ToBack") {
	    status = 5;
	    $("header span").text("审核退回");
	    $(".next").css("display", "none");
	    sessionStorage.setItem("isIn", 3);
	    $(".searchBox").css("display", "block");
	    $(".filterBox").css("display", "block");
	    $(".list").css("margin-top", "148px");
	    var htmlStr = "";
	    $.post(urlDns + "/control_app/yz/zf/list", {
	        // 状态 退回5
	        status: status,
	        // 第几页
	        page: 1,
	        // 一页的条数
	        rows: 20,
	        // 搜索框的内容
	        name: "",
	        // 过滤条件的开始时间和结束时间
	        startdate: "",
	        enddate: "",
	        // 过滤条件的发票抬头
	        comid: "",
	        pass_app: pass_app,
	        tel_app: tel_app,
	        code_app: code_app
	    }, function(data) {
	        console.log(JSON.stringify(data));
	        if (data.result == 0) {
	            // 需要重新登录
	            if (window.plus) {
	                goToLogin("../register/login.html");
	            } else {
	                document.addEventListener('plusready', goToLogin, false);
	            }
	        } else {
	            for (var i = 0; i < data.rows.length; i++) {
	                htmlStr += `
	                <div class="item">
	                    <input class="select" name="hh" value="${data.rows[i].id}" type="checkbox">
	                    <div class="comTime">
	                        <span class="comName">${data.rows[i].comname}</span>
	                        <div class="href" detailId="${data.rows[i].id}">
	                            <span class="time">${data.rows[i].zq}</span>
	                            <img src="../../img/next.png" alt="">
	                        </div>
	                    </div>
	                    <div class="amount">
	                        <span>${data.rows[i].name}</span>
	                        <span>${data.rows[i].fkmoney}</span>
	                    </div>
	                </div>
	            `;
	            }
	            $(".list").html(htmlStr);
	        }
	
	    });
	
	
	    // 搜索
	    $(".search").click(() => {
	        var searchCont = $(".searchCont").val();
	        var htmlStr = "";
	        $.post(urlDns + "/control_app/yz/zf/list", {
	            // 状态  退回5
	            status: status,
	            // 第几页
	            page: 1,
	            // 一页的条数
	            rows: 20,
	            // 搜索框的内容
	            name: searchCont,
	            // 过滤条件的开始时间和结束时间
	            startdate: "",
	            enddate: "",
	            // 过滤条件的发票抬头
	            comid: "",
	            pass_app: pass_app,
	            tel_app: tel_app,
	            code_app: code_app
	        }, function(data) {
	            console.log(JSON.stringify(data));
	            if (data.result == 0) {
	                // 需要重新登录
	                if (window.plus) {
	                    goToLogin("../register/login.html");
	                } else {
	                    document.addEventListener('plusready', goToLogin, false);
	                }
	            } else {
	                for (var i = 0; i < data.rows.length; i++) {
	                    htmlStr += `
	                        <div class="item">
	                            <input class="select" name="hh" value="${data.rows[i].id}" type="checkbox">
	                            <div class="comTime">
	                                <span class="comName">${data.rows[i].comname}</span>
	                                <div class="href" detailId="${data.rows[i].id}">
	                                    <span class="time">${data.rows[i].zq}</span>
	                                    <img src="../../img/next.png" alt="">
	                                </div>
	                            </div>
	                            <div class="amount">
	                                <span>${data.rows[i].name}</span>
	                                <span>${data.rows[i].fkmoney}</span>
	                            </div>
	                        </div>
	                    `;
	                }
	                $(".list").html(htmlStr);
	                page = 1;
	            }
	
	        });
	    });
	
	
	    // 过滤
	    $(".ok").click(() => {
	        // 收起过滤条件
	        $(".nextImg").attr("src", "../../img/next.png");
	        $(".filterParamBg").css("display", "none");
	        open = !open;
	
	        var selectComId = $(".selectComName").attr("id");
	        var startDate = $("#startDate").text();
	        var endDate = $("#endDate").text();
	        var htmlStr = "";
	        $.post(urlDns + "/control_app/yz/zf/list", {
	            // 状态  退回5
	            status: status,
	            // 第几页
	            page: 1,
	            // 一页的条数
	            rows: 20,
	            // 搜索框的内容
	            name: "",
	            // 过滤条件的开始时间和结束时间
	            startdate: startDate,
	            enddate: endDate,
	            // 过滤条件的发票抬头
	            comid: selectComId,
	            pass_app: pass_app,
	            tel_app: tel_app,
	            code_app: code_app
	        }, function(data) {
	            console.log(JSON.stringify(data));
	            if (data.result == 0) {
	                // 需要重新登录
	                if (window.plus) {
	                    goToLogin("../register/login.html");
	                } else {
	                    document.addEventListener('plusready', goToLogin, false);
	                }
	            } else {
	                for (var i = 0; i < data.rows.length; i++) {
	                    htmlStr += `
	                <div class="item">
	                    <input class="select" name="hh" value="${data.rows[i].id}" type="checkbox">
	                    <div class="comTime">
	                        <span class="comName">${data.rows[i].comname}</span>
	                        <div class="href" detailId="${data.rows[i].id}">
	                            <span class="time">${data.rows[i].zq}</span>
	                            <img src="../../img/next.png" alt="">
	                        </div>
	                    </div>
	                    <div class="amount">
	                        <span>${data.rows[i].name}</span>
	                        <span>${data.rows[i].fkmoney}</span>
	                    </div>
	                </div>
	            `;
	                }
	                $(".list").html(htmlStr);
	                page = 1;
	            }
	
	        });
	    });
	}
	if (id == "completed") {
	    status = 6;
	    $("header span").text("审核通过");
	    $(".next").css("display", "none");
	    sessionStorage.setItem("isIn", 4);
	    $(".searchBox").css("display", "block");
	    $(".filterBox").css("display", "block");
	    $(".list").css("margin-top", "148px");
	    var htmlStr = "";
	    $.post(urlDns + "/control_app/yz/zf/list", {
	        // 状态  通过6
	        status: status,
	        // 第几页
	        page: 1,
	        // 一页的条数
	        rows: 20,
	        // 搜索框的内容
	        name: "",
	        // 过滤条件的开始时间和结束时间
	        startdate: "",
	        enddate: "",
	        // 过滤条件的发票抬头
	        comid: "",
	        pass_app: pass_app,
	        tel_app: tel_app,
	        code_app: code_app
	    }, function(data) {
	        console.log(JSON.stringify(data));
	        if (data.result == 0) {
	            // 需要重新登录
	            if (window.plus) {
	                goToLogin("../register/login.html");
	            } else {
	                document.addEventListener('plusready', goToLogin, false);
	            }
	        } else {
	            for (var i = 0; i < data.rows.length; i++) {
	                htmlStr += `
	                <div class="item">
	                    <input class="select" name="hh" value="${data.rows[i].id}" type="checkbox">
	                    <div class="comTime">
	                        <span class="comName">${data.rows[i].comname}</span>
	                        <div class="href" detailId="${data.rows[i].id}">
	                            <span class="time">${data.rows[i].zq}</span>
	                            <img src="../../img/next.png" alt="">
	                        </div>
	                    </div>
	                    <div class="amount">
	                        <span>${data.rows[i].name}</span>
	                        <span>${data.rows[i].fkmoney}</span>
	                    </div>
	                </div>
	            `;
	            }
	            $(".list").html(htmlStr);
	        }
	
	    });
	
	    // 搜索
	    $(".search").click(() => {
	        var searchCont = $(".searchCont").val();
	        var htmlStr = "";
	        $.post(urlDns + "/control_app/yz/zf/list", {
	            // 状态  通过6
	            status: status,
	            // 第几页
	            page: 1,
	            // 一页的条数
	            rows: 20,
	            // 搜索框的内容
	            name: searchCont,
	            // 过滤条件的开始时间和结束时间
	            startdate: "",
	            enddate: "",
	            // 过滤条件的发票抬头
	            comid: "",
	            pass_app: pass_app,
	            tel_app: tel_app,
	            code_app: code_app
	        }, function(data) {
	            console.log(JSON.stringify(data));
	            if (data.result == 0) {
	                // 需要重新登录
	                if (window.plus) {
	                    goToLogin("../register/login.html");
	                } else {
	                    document.addEventListener('plusready', goToLogin, false);
	                }
	            } else {
	                for (var i = 0; i < data.rows.length; i++) {
	                    htmlStr += `
	                        <div class="item">
	                            <input class="select" name="hh" value="${data.rows[i].id}" type="checkbox">
	                            <div class="comTime">
	                                <span class="comName">${data.rows[i].comname}</span>
	                                <div class="href" detailId="${data.rows[i].id}">
	                                    <span class="time">${data.rows[i].zq}</span>
	                                    <img src="../../img/next.png" alt="">
	                                </div>
	                            </div>
	                            <div class="amount">
	                                <span>${data.rows[i].name}</span>
	                                <span>${data.rows[i].fkmoney}</span>
	                            </div>
	                        </div>
	                    `;
	                }
	                $(".list").html(htmlStr);
	                page = 1;
	            }
	
	        });
	    });
	
	
	    // 过滤
	    $(".ok").click(() => {
	        // 收起过滤条件
	        $(".nextImg").attr("src", "../../img/next.png");
	        $(".filterParamBg").css("display", "none");
	        open = !open;
	
	        var selectComId = $(".selectComName").attr("id");
	        var startDate = $("#startDate").text();
	        var endDate = $("#endDate").text();
	        console.log(startDate)
	        console.log(endDate)
	        var htmlStr = "";
	        $.post(urlDns + "/control_app/yz/zf/list", {
	            // 状态  通过6
	            status: status,
	            // 第几页
	            page: 1,
	            // 一页的条数
	            rows: 20,
	            // 搜索框的内容
	            name: "",
	            // 过滤条件的开始时间和结束时间
	            startdate: startDate,
	            enddate: endDate,
	            // 过滤条件的发票抬头
	            comid: selectComId,
	            pass_app: pass_app,
	            tel_app: tel_app,
	            code_app: code_app
	        }, function(data) {
	            console.log(JSON.stringify(data));
	            if (data.result == 0) {
	                // 需要重新登录
	                if (window.plus) {
	                    goToLogin("../register/login.html");
	                } else {
	                    document.addEventListener('plusready', goToLogin, false);
	                }
	            } else {
	                for (var i = 0; i < data.rows.length; i++) {
	                    htmlStr += `
	                        <div class="item">
	                            <input class="select" name="hh" value="${data.rows[i].id}" type="checkbox">
	                            <div class="comTime">
	                                <span class="comName">${data.rows[i].comname}</span>
	                                <div class="href" detailId="${data.rows[i].id}">
	                                    <span class="time">${data.rows[i].zq}</span>
	                                    <img src="../../img/next.png" alt="">
	                                </div>
	                            </div>
	                            <div class="amount">
	                                <span>${data.rows[i].name}</span>
	                                <span>${data.rows[i].fkmoney}</span>
	                            </div>
	                        </div>
	                    `;
	                }
	                $(".list").html(htmlStr);
	                page = 1;
	            }
	
	        });
	    });
	}
	
	// 清空搜索框
	$(".toEmpty").click(() => {
	    $(".searchIn>input").val("");
	});
	
	// 当点击搜索框的时候，把筛选条件框收起来
	$(".searchBox").click(() => {
	    $(".nextImg").attr("src", "../../img/next.png");
	    $(".filterParamBg").css("display", "none");
	    open = !open;
	});
	
	// 待提交页面的选择按钮
	var flag = false;
	$(".next").click(() => {
	    flag = !flag;
	    if (flag) {
	        // 选中的复选框的值
	        $(".comTime").css("padding-left", "33px");
	        $(".amount").css("padding-left", "33px");
	        $(".select").css("display", "block");
	        $("footer").css("display", "block");
	        $(".next").text("取消选择");
	        $(".back").css("display", "none");
	        $(".select_all").css("display", "block");
	        $(".list").css("margin-bottom", "70px");
	    } else {
	        $(":checkbox[name='hh']").prop("checked", false);
	        $(".comTime").css("padding-left", "15px");
	        $(".amount").css("padding-left", "15px");
	        $(".select").css("display", "none");
	        $("footer").css("display", "none");
	        $("footer").css("display", "none");
	        $(".next").text("选择");
	        $(".back").css("display", "block");
	        $(".select_all").css("display", "none");
	        $(".list").css("margin-bottom", "20px");
	
	    }
	
	});
	
	// 全选按钮
	$(".select_all").click(() => {
	    $(":checkbox[name='hh']").prop("checked", "checked");
	});
	
	// 提交
	$(".submit").click(() => {
	    var value = $('input[type=checkbox]:checked').map(function() { return this.value });
	    // console.log(JSON.stringify(value));
	    var ids = [];
	    for (var i = 0; i < value.length; i++) {
	        a = value[i];
	        console.log(value[i]);
	        ids.push(value[i]);
	    }
	    console.log(ids instanceof Array)
	    console.log(JSON.stringify(ids))
	
	    $.ajax({
	        type: "post",
	        url: urlDns + "/control_app/yz/zf/send",
	        // 当参数为数组时，直接传过去后台接收不到，要设置traditional: true
	        traditional: true,
	        data: {
	            "ids": ids,
	            "pass_app": pass_app,
	            "tel_app": tel_app,
	            "code_app": code_app
	        },
	        dataType: "json",
	        success: function(data) {
	            // console.log(JSON.stringify(data));
	            if (data.result == 0) {
	                // 需要重新登录
	                if (window.plus) {
	                    goToLogin("../register/login.html");
	                } else {
	                    document.addEventListener('plusready', goToLogin, false);
	                }
	            } else {
	                // if (data.status == 1) {
	                // history.back()
	                // 刷新页面数据
	                $(".success").css("display", "block");
	                setTimeout(() => {
	                    $(".success").css("display", "none");
	                    location.reload();
	                }, 1000);
	                // } else {
	                //     alert("提交失败");
	                // }
	            }
	
	        }
	    });
	});
	
	// 删除
	$(".del").click(() => {
	    var value = $('input[type=checkbox]:checked').map(function() { return this.value });
	    // console.log(JSON.stringify(value));
	    var ids = [];
	    for (var i = 0; i < value.length; i++) {
	        console.log(value[i])
	        ids.push(value[i]);
	    }
	    $.ajax({
	        type: "post",
	        url: urlDns + "/control_app/yz/zf/del",
	        // 当参数为数组时，直接传过去后台接收不到，要设置traditional: true
	        traditional: true,
	        data: {
	            "id": ids,
	            "pass_app": pass_app,
	            "tel_app": tel_app,
	            "code_app": code_app
	        },
	        dataType: "json",
	        success: function(data) {
	            // console.log(JSON.stringify(data));
	            if (data.result == 0) {
	                // 需要重新登录
	                if (window.plus) {
	                    goToLogin("../register/login.html");
	                } else {
	                    document.addEventListener('plusready', goToLogin, false);
	                }
	            } else {
	                // if (data.status == 1) {
	                location.reload();
	                // } else {
	                //     alert("删除失败");
	                // }
	            }
	
	        }
	    });
	});
	
	
	// 展开/收起过滤条件
	var open = false;
	$(".filterBox").click(() => {
	    open = !open;
	    if (open == true) {
	        $(".nextImg").attr("src", "../../img/down.png");
	        $(".filterParamBg").css("display", "block");
	    } else {
	        $(".nextImg").attr("src", "../../img/next.png");
	        $(".filterParamBg").css("display", "none");
	    }
	});
	
	// 点击空白收起过滤条件
	$(".noneParamBg").click(() => {
	    $(".filterParamBg").css("display", "none");
	    $(".nextImg").attr("src", "../../img/next.png");
	    open = !open;
	});
	
	// 选择筛选的日期
	$("#startTime").on("click", starTimeLen);
	$("#endTime").on("click", endTimeLen);
	var year = new Date().getFullYear();
	var month = new Date().getMonth() + 1;
	var nowdate = new Date().getDate();
	// 默认时间为当前月份
	$("#startDate").text(year + "-" + format(month) + "-" + format(nowdate));
	$("#endDate").text(year + "-" + format(month) + "-" + format(nowdate));
	
	// 格式化时间
	function format(num) {
	    if (num < 10) {
	        return "0" + num;
	    } else {
	        return num
	    }
	}
	
	// 服务周期开始时间
	function starTimeLen() {
	    var dtPicker = new mui.DtPicker({
	        type: 'date',
	        // beginDate: new Date(year, 00),
	        endDate: new Date(year, month - 1, nowdate)
	    });
	    /*  type参数：'datetime'-完整日期视图(年月日时分)
	            'date'--年视图(年月日)
	            'time' --时间视图(时分)
	            'month'--月视图(年月)
	            'hour'--时视图(年月日时)
	    */
	    dtPicker.show(function(selectItems) {
	        var y = selectItems.y.text; //获取选择的年
	        var m = selectItems.m.text; //获取选择的月
	        var d = selectItems.d.text; //获取选择的日
	        var date = y + "-" + m + "-" + d;
	        $("#startDate").text(date);
	    })
	}
	
	// 服务周期结束时间
	function endTimeLen() {
	    var dtPicker = new mui.DtPicker({
	        type: 'date',
	        // beginDate: new Date(year, 00),
	        endDate: new Date(year, month - 1, nowdate)
	    });
	
	    dtPicker.show(function(selectItems) {
	        var y = selectItems.y.text; //获取选择的年
	        var m = selectItems.m.text; //获取选择的月
	        var d = selectItems.d.text; //获取选择的日
	        var date = y + "-" + m + "-" + d;
	        $("#endDate").text(date);
	    });
	}
	
	// -------------------------------------------------------
	var comArr = [];
	$.post(urlDns + "/control_app/yz/tt/list", {
	    pass_app: pass_app,
	    tel_app: tel_app,
	    code_app: code_app
	}, function(data) {
	    // console.log(JSON.stringify(data))
	    if (data.result == 0) {
	        // 需要重新登录
	        if (window.plus) {
	            goToLogin("../register/login.html");
	        } else {
	            document.addEventListener('plusready', goToLogin, false);
	        }
	    } else {
	        for (var i = 0; i < data.rows.length; i++) {
	            comArr.push({ "value": data.rows[i].id, "text": data.rows[i].name });
	        }
	    }
	
	    // console.log(JSON.stringify(comArr))
	});
	
	// 选择接受服务单位
	$(".selectCom").on("click", selectCom);
	
	function selectCom() {
	    var popPicker = new mui.PopPicker();
	    popPicker.setData(comArr)
	        // [{ value: 'ywj', text: '北海骄龙网络有限公司' },
	        //     { value: 'aaa', text: 'xxxxxxx有限公司' },
	        //     { value: 'lj', text: 'xxxxxxx有限公司' },
	        //     { value: 'ymt', text: 'xxxxxxx有限公司' },
	        // ]
	    popPicker.show(function(selectItems) {
	        $(".selectComName").text(selectItems[0].text);
	        $(".selectComName").attr("id", selectItems[0].value);
	        // console.log(selectItems[0].text);
	        // console.log(selectItems[0].value);
	    })
	}
	
	// -----------------------------------------------------------
	
	// 重置筛选条件
	$(".reset").click(() => {
	    $(".selectComName").text("");
	    $("#startDate").text(year + "-" + format(month));
	    $("#endDate").text(year + "-" + format(month));
	});
	
	// 跳转详情页面
	$(document).on("click", ".list .href", function(e) {
	    var detailId = $(this).attr("detailId");
	    console.log(detailId)
	    sessionStorage.setItem('incomeDetailId', detailId);
	    // page.chooseType();
	    location.href = "./incomeDetail.html";
	});
	
	// 加载下一页
	$(window).scroll(function() {
	    if ($(window).scrollTop() + $(window).height() == $(document).height()) {
	        page = page + 1;
	        console.log(page)
	        $.post(urlDns + "/control_app/yz/zf/list", {
	            // 状态  待提交0
	            status: status,
	            // 第几页
	            page: page,
	            // 一页的条数
	            rows: 20,
	            // 搜索框的内容
	            name: "",
	            // 过滤条件的开始时间和结束时间
	            startdate: "",
	            enddate: "",
	            // 过滤条件的发票抬头
	            comid: "",
	            pass_app: pass_app,
	            tel_app: tel_app,
	            code_app: code_app
	        }, function(data) {
	            console.log(JSON.stringify(data));
	            if (data.result == 0) {
	                // 需要重新登录
	                if (window.plus) {
	                    goToLogin("../register/login.html");
	                } else {
	                    document.addEventListener('plusready', goToLogin, false);
	                }
	            } else {
	                if (data.rows.length > 0) {
	                    var htmlStr = "";
	                    for (var i = 0; i < data.rows.length; i++) {
	                        htmlStr += `
	                        <div class="item">
	                            <input class="select" name="hh" value="${data.rows[i].id}" type="checkbox">
	                            <div class="comTime">
	                                <span class="comName">${data.rows[i].comname}</span>
	                                <div class="href" detailId="${data.rows[i].id}">
	                                    <span class="time">${data.rows[i].zq}</span>
	                                    <img src="../../img/next.png" alt="">
	                                </div>
	                            </div>
	                            <div class="amount">
	                                <span>${data.rows[i].name}</span>
	                                <span>${data.rows[i].fkmoney}</span>
	                            </div>
	                        </div>
	                    `;
	                    }
	                    $(".list").append(htmlStr);
	                }
	            }
	
	
	        });
	    }
	});
</script>

</html>