<!DOCTYPE html>
<html lang="">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="../../../js/mui.min.js"></script>
    <link rel="stylesheet" href="../../../css/mui.min.css">
    <link rel="stylesheet" href="../../../css/mui.picker.min.css">
    <script src="../../../js/mui.picker.min.js"></script>
    <title>合作伙伴-名下业务-收入详情</title>
		
		<style type="text/css">
			body {
			    margin: 0;
			    padding: 0;
			    color: #333333;
			}
			
			header {
			    position: relative;
			    text-align: center;
			    line-height: 44px;
			    width: 100%;
			    height: 44px;
			    background-color: white;
			    box-shadow: 0 2px 2px 0 rgba(231, 231, 231, 1);
			    font-weight: bold;
			}
			
			header>img {
			    position: absolute;
			    top: 12px;
			    left: 5px;
			    width: 20px;
			    height: 20px;
			}
			
			.next {
			    position: absolute;
			    top: 0;
			    right: 10px;
			    line-height: 44px;
			    color: #7EB6FF;
			}
			
			.detailBox,
			.income {
			    width: 100%;
			    background-color: white;
			    /* margin-top: 20px; */
			}
			
			.income {
			    display: none;
			    margin: 0;
			}
			
			.detailBox>div,
			.income>div {
			    width: 95%;
			    height: 46px;
			    margin-left: 2.5%;
			    border-top: 1px solid rgb(231, 231, 231);
			    display: flex;
			    justify-content: space-between;
			    line-height: 46px;
			    font-size: 14px;
			}
			
			.incomeTitle {
			    display: none;
			    width: 100%;
			    height: 20px;
			    font-size: 12px;
			    line-height: 20px;
			    padding-left: 2.5%;
			}
			
			
			/* .detailBox>div:nth-last-of-type(1),
			.income>div:nth-last-of-type(1) {
			    border: none;
			} */
			
			.detailBox>div>div>img,
			.accptCom>div>img {
			    width: 25px;
			    height: 25px;
			    vertical-align: middle;
			}
			
			.comName,
			.serverName,
			.serverCont,
			.amount {
			    font-size: 12px;
			}
			
			.serverName,
			.amount {
			    width: 50%;
			    outline: none;
			    border: none;
			    text-align: right;
			    padding: 0;
			    color: #333333;
			}
			
			.amount {
			    color: black;
			    font-size: 14px;
			    font-weight: bold;
			}
			
			.amount,
			.serverContBox {
			    position: relative;
			    width: 50%;
			}
			
			.serverCont {
			    display: inline-block;
			    width: calc(100% - 25px);
			    overflow: hidden;
			    white-space: nowrap;
			    text-overflow: ellipsis;
			    text-align: right;
			}
			
			.serverContBox img {
			    position: absolute;
			    right: -8px;
			    top: 10px;
			}
			
			.accptCom {
			    width: 100%;
			    height: 46px;
			    background-color: white;
			    display: flex;
			    justify-content: space-between;
			    line-height: 46px;
			    font-size: 14px;
			    margin-top: 20px;
			}
			
			.accptCom {
			    padding-left: 2.5%;
			}
			
			input[disabled] {
			    background-color: white;
			}
			
			.mui-btn-blue,
			.mui-btn-primary,
			input[type="submit"] {
			    background-color: #7EB6FF;
			    border: 1px solid #7EB6FF;
			}
			
			.timeBox {
			    /* padding-right: 15px; */
			    text-align: right;
			    width: 75%;
			    color: #333333;
			    /* display: flex;
			    justify-content: space-around; */
			}
			
			#startTime,
			#endTime {
			    display: flex;
			    justify-content: space-around;
			    /* position: relative; */
			    width: 40%;
			    height: 30px;
			    border: 1px solid rgb(204, 204, 204);
			    border-radius: 4px;
			    margin-top: 8px;
			}
			
			#startTime>img,
			#endTime>img {
			    width: 16px;
			    height: 16px;
			    margin-top: 5px;
			}
			
			#startTime>span,
			#endTime>span {
			    font-size: 13px;
			    line-height: 30px;
			}
			
			.returnTitle,
			.returnCont {
			    display: none;
			    width: 100%;
			    font-size: 14px;
			    padding: 0 2.5%;
			}
			
			.returnTitle {
			    margin-top: 15px;
			}
			
			.returnCont {
			    line-height: 20px;
			}
			
			footer {
			    display: none;
			    width: 100%;
			    height: 50px;
			    position: fixed;
			    z-index: 5;
			    bottom: 0;
			    left: 0;
			    background-color: white;
			}
			
			footer div {
			    position: absolute;
			    top: 5px;
			    width: calc((100% - 45px)/2);
			    height: 40px;
			    text-align: center;
			    line-height: 40px;
			    font-size: 14px;
			    border-radius: 4px;
			}
			
			.return {
			    left: 15px;
			    border: 1px solid rgb(204, 204, 204);
			}
			
			.ok {
			    right: 15px;
			    background-color: #7EB6FF;
			    color: white;
			}
			
			.success {
			    display: none;
			    width: 100%;
			    height: 100vh;
			    position: fixed;
			    top: 0;
			    left: 0;
			    z-index: 9999;
			}
			
			.success>img {
			    width: 120px;
			    height: 120px;
			    margin-left: calc((100% - 120px)/2);
			    margin-top: calc((100vh - 120px)/2);
			}
			
			.detailBox_name {
			    margin-top: 20px;
			}
		</style>
</head>

<body>
    <header>
        <img class="back" src="../../../img/back_black.png" alt="">
        <span>收入信息</span>
        <!-- <div class="next">保存</div> -->
    </header>

    <div class="detailBox detailBox_name">

        <div style="padding-right:5px">
            <span>姓名</span>
            <!-- ！！！！！！渲染时用最后一个类名！！！！！！！！！ -->
            <input class="serverName name" disabled/>
        </div>
        <div>
            <span>收款方式</span>
            <div class="serverContBox">
                <span class="serverCont income_type"></span>
                <img src="../../../img/next.png" alt="">
            </div>
        </div>

        <div style="padding-right:5px">
            <span>收款账户</span>
            <input class="amount amountNum income_account" disabled/>
        </div>
    </div>
    <div class="accptCom">
        <span>接受服务单位</span>
        <div>
            <span class="comName"></span>
            <img src="../../../img/next.png" alt="">
        </div>
    </div>
    <div class="detailBox">

        <div style="padding-right:5px">
            <span>劳务、服务名称</span>
            <input class="serverName bus_name" disabled/>
        </div>
        <div>
            <span>劳务、服务内容</span>
            <div class="serverContBox bus_content_box">
                <span class="serverCont bus_content"></span>
                <img src="../../../img/next.png" alt="">
            </div>
        </div>
        <div>
            <span>服务周期</span>
            <div class="timeBox">
                <!-- <section id="startTime">
                    <span id="startDate">2019-08</span>
                    <img src="../../../img/calendar.png" alt="">
                </section>
                至
                <section id="endTime">
                    <span id="endDate">2019-09</span>
                    <img src="../../../img/calendar.png" alt="">
                </section> -->

            </div>
        </div>
        <div style="padding-right:5px">
            <span>支付金额</span>
            <input class="amount amountNum" disabled/>
        </div>
    </div>
    <!-- 退回/确认 -->
    <footer>
        <div class="return">退回</div>
        <div class="ok">确认</div>
    </footer>

    <!-- 审核通过时显示 -->
    <div class="incomeTitle">
        私人账户净收入
    </div>
    <div class="income">
        <div style="padding-right:5px">
            <span>应收入总额</span>
            <input class="amount incomeNum" value="3,000.00" />
        </div>
        <div style="padding-right:5px">
            <span>未到账</span>
            <input class="amount didntIncome" />
        </div>
        <div style="padding-right:5px">
            <span>已到账</span>
            <input class="amount didIncome" />
        </div>
    </div>

    <!-- 审核退回时显示 -->
    <div class="returnTitle">退回原因：</div>
    <div class="returnCont"></div>

    <div class="success">
        <img src="../../../img/success.png" alt="">
    </div>
</body>
<script src="../../../js/jquery-3.3.1.js"></script>
<script src="../../../js/urlDns.js"></script>

<script type="text/javascript">
	var pass_app = localStorage.getItem("pass_app");
	var tel_app = localStorage.getItem("tel_app");
	var code_app = localStorage.getItem("code_app");
	
	// 返回
	$(".back").click(() => {
	    history.back();
	});
	
	// 查看劳务、服务内容
	$(".bus_content_box").click(() => {
	    location.href = "./business_content.html";
	    // 储存是收入还是发票的标志
	    sessionStorage.setItem("serverContType","zf");
	});
	
	// 获取数据ID
	var incomeDetailId = sessionStorage.getItem("incomeDetailId");
	console.log("数据ID" + incomeDetailId);
	
	// 请求数据
	$.post(urlDns + "/control_app/hhr/zf/showUI", {
	    id: incomeDetailId,
	    pass_app: pass_app,
	    tel_app: tel_app,
	    code_app: code_app
	}, function(data) {
	    console.log(JSON.stringify(data))
	    if (data.result == 0) {
	        // 需要重新登录
	        if (window.plus) {
	            goToLogin("../../register/login.html");
	        } else {
	            document.addEventListener('plusready', goToLogin, false);
	        }
	    } else {
	        $(".name").val(data.username);
	        $(".income_type").text(data.khh);
	        $(".income_account").val(data.kcode);
	
	        $(".comName").text(data.comname);
	        $(".bus_name").val(data.name);
	        $(".bus_content").text(data.descripts);
	        
	        $(".timeBox").text(data.startdate + "至" + data.enddate);
	        $(".timeBox").css("justify-content", "flex-end");
	        $(".amountNum").val(data.fkmoney);
	        // if (data.reasons) {
	        //     $(".returnCont").text(data.reasons);
	        // }
	    }
	});
</script>

</html>
