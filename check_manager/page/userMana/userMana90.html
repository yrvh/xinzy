<!DOCTYPE html>
<html lang="">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="../../../js/mui.min.js"></script>
    <link rel="stylesheet" href="../../../css/mui.min.css">
    <title>审核主管: 纳税设置审核</title>
		<script type="text/javascript">
			mui.init();
		</script>
		
		<style type="text/css">
			body {
			    margin: 0;
			    padding: 0;
			    color: #333333;
			}
			
			header {
			    position: fixed;
			    top: 0;
			    left: 0;
			    z-index: 99;
			    text-align: center;
			    line-height: 44px;
			    width: 100%;
			    height: 44px;
			    /* font-weight: bold; */
			    background-color: white;
			    box-shadow: 0 2px 2px 0 rgba(231, 231, 231, 1);
			}
			
			header>img {
			    position: absolute;
			    top: 12px;
			    left: 5px;
			    width: 20px;
			    height: 20px;
			}
			
			header>div {
			    position: absolute;
			    top: 0;
			    right: 5px;
			    height: 44px;
			    line-height: 44px;
			}
			
			.next {
			    line-height: 44px;
			    color: #7EB6FF;
			    margin-right: 10px;
			}
			
			ul {
			    list-style: none;
			    padding: 0;
			    margin: 20px 0 0 0;
			}
			
			li {
			    display: flex;
			    justify-content: space-between;
			    width: 100%;
			    height: 46px;
			    background-color: white;
			    margin-bottom: 2px;
			    line-height: 46px;
			    padding: 0 5px 0 15px;
			    box-sizing: border-box;
			}
			
			li img {
			    width: 25px;
			    height: 25px;
			    vertical-align: middle;
			}
			
			li>div>span {
			    color: rgb(153, 153, 153);
			}
			
			.com-ul,.free-ul,.coop-ul{
				margin-top: 64px;
			}
			
			.free-ul,.coop-ul{
				display: none;
			}
			
			.change{
				position: absolute;
				left: calc((100% - 260px)/2);
				top: 5px;
				width: 268px;
				height: 34px;
				background-color: white;
				border-radius: 4px;
				display: flex;
				justify-content: space-between;
				border: 1px solid #7EB6FF;
			}
			
			.change>div {
				width: 90px;
				text-align: center;
				line-height: 34px;
			
			}
			.input_com{
			    background-color: #7EB6FF;
			    color: white;
			}
			
			.input_free,.input_coop{
			    color: #7EB6FF;
			}
			.input_free {
				border-right: 1px solid #7EB6FF;
				border-left: 1px solid #7EB6FF;
			}
			
			.mybadge {display: none;}
		</style>
</head>

<body>
    <header>
        <img class="back" src="../../../img/back_black.png" alt="">
        <div class="change">
            <div class="input_com">单位用户</div>
            <div class="input_free">业者用户</div>
						<div class="input_coop">合作伙伴</div>
        </div>
    </header>

    <ul class="com-ul">
        <li class="com-wait">
            <span>待审核 <span class="mybadge mui-badge mui-badge-danger"></span></span>
            <div>
                <span class="com-wait-li"></span>
                <img src="../../../img/next.png" alt="">
            </div>
        </li>
        <li class="com-pass">
            <span>审核通过</span>
            <div>
                <span class="com-pass-li"></span>
                <img src="../../../img/next.png" alt="">
            </div>
        </li>
        <!-- <li class="com-back">
            <span>审核退回</span>
            <div>
                <span class="com-back-li"></span>
                <img src="../../../img/next.png" alt="">
            </div>
        </li> -->
    </ul>

		<ul class="free-ul">
		    <li class="free-wait">
		        <span>待审核</span>
		        <div>
		            <span class="free-wait-li"></span>
		            <img src="../../../img/next.png" alt="">
		        </div>
		    </li>
		    <li class="free-pass">
		        <span>审核通过</span>
		        <div>
		            <span class="free-pass-li"></span>
		            <img src="../../../img/next.png" alt="">
		        </div>
		    </li>
		    <!-- <li class="free-back">
		        <span>审核退回</span>
		        <div>
		            <span class="free-back-li"></span>
		            <img src="../../../img/next.png" alt="">
		        </div>
		    </li> -->
		</ul>
		
    <ul class="coop-ul">
        <li class="coop-wait">
            <span>待审核</span>
            <div>
                <span class="coop-wait-li"></span>
                <img src="../../../img/next.png" alt="">
            </div>
        </li>
        <li class="coop-pass">
            <span>审核通过</span>
            <div>
                <span class="coop-pass-li"></span>
                <img src="../../../img/next.png" alt="">
            </div>
        </li>
        <!-- <li class="coop-back">
            <span>审核退回</span>
            <div>
                <span class="coop-back-li"></span>
                <img src="../../../img/next.png" alt="">
            </div>
        </li> -->
    </ul>
</body>

<script src="../../../js/jquery-3.3.1.js"></script>
<script src="../../../js/urlDns.js"></script>

<script type="text/javascript">
	// 返回
	$(".back").click(() => {
		sessionStorage.removeItem("addtype");
		sessionStorage.removeItem("income_status");
		history.back();
	});
	var pass_app = localStorage.getItem("pass_app");
	var tel_app = localStorage.getItem("tel_app");
	var code_app = localStorage.getItem("code_app");
	
	
	if (addtype==undefined){
		getInfo(2)   // 初次加载时, 获取页面信息 2:单位录入   1:业者录入  11合作伙伴
	}   
	
	// 角色切换
	$(".input_com").click(()=>{
		$(".input_com").css("background-color","#7EB6FF");
		$(".input_com").css("color","white");
		$(".input_free").css("background-color","white");
		$(".input_free").css("color","#7EB6FF");
		$(".input_coop").css("background-color","white");
		$(".input_coop").css("color","#7EB6FF");
		$(".com-ul").css("display","block");
		$(".free-ul").css("display","none");
		$(".coop-ul").css("display","none");
			
			getInfo(2) // 重新获取单位的 页面数据信息
	})

	$(".input_free").click(()=>{
		$(".input_com").css("background-color","white");
		$(".input_com").css("color","#7EB6FF");
		$(".input_free").css("background-color","#7EB6FF");
		$(".input_free").css("color","white");
		$(".input_coop").css("background-color","white");
		$(".input_coop").css("color","#7EB6FF");
		$(".com-ul").css("display","none");
		$(".free-ul").css("display","block");
		$(".coop-ul").css("display","none");
	
		getInfo(1) // 重新获取业者的 页面数据信息
	})
	
	$(".input_coop").click(()=>{
		$(".input_com").css("background-color","white");
		$(".input_com").css("color","#7EB6FF");
		$(".input_free").css("background-color","white");
		$(".input_free").css("color","#7EB6FF");
		$(".input_coop").css("background-color","#7EB6FF");
		$(".input_coop").css("color","white");
		$(".com-ul").css("display","none");
		$(".free-ul").css("display","none");
		$(".coop-ul").css("display","block");
			
		getInfo(11) // 重新获取合作伙伴的 页面数据信息
	})
	
	// 判断下一个 页面返回来是处在 单位  业者   伙伴 的界面
	var addtype = sessionStorage.getItem("addtype");
	if (addtype == "2") {
		$(".input_com").css("background-color","#7EB6FF");
		$(".input_com").css("color","white");
		$(".input_free").css("background-color","white");
		$(".input_free").css("color","#7EB6FF");
		$(".input_coop").css("background-color","white");
		$(".input_coop").css("color","#7EB6FF");
		$(".com-ul").css("display","block");
		$(".free-ul").css("display","none");
		$(".coop-ul").css("display","none");
		getInfo(2)
	}
	if (addtype == "1") {
		$(".input_com").css("background-color","white");
		$(".input_com").css("color","#7EB6FF");
		$(".input_free").css("background-color","#7EB6FF");
		$(".input_free").css("color","white");
		$(".input_coop").css("background-color","white");
		$(".input_coop").css("color","#7EB6FF");
		$(".com-ul").css("display","none");
		$(".free-ul").css("display","block");
		$(".coop-ul").css("display","none");
		getInfo(1)
	}
	if (addtype == "11") {
		$(".input_com").css("background-color","white");
		$(".input_com").css("color","#7EB6FF");
		$(".input_free").css("background-color","white");
		$(".input_free").css("color","#7EB6FF");
		$(".input_coop").css("background-color","#7EB6FF");
		$(".input_coop").css("color","white");
		$(".com-ul").css("display","none");
		$(".free-ul").css("display","none");
		$(".coop-ul").css("display","block");
		getInfo(11)
	}
	
	
	// 跳转列表
	// ========单位用户=======
	$(".com-wait").click(() => {
		sessionStorage.setItem("addtype", "2");
		sessionStorage.setItem("income_status", 0);
		location.href = './user_list.html';
	});
	
	$(".com-pass").click(() => {
		sessionStorage.setItem("addtype", "2");
		sessionStorage.setItem("income_status", 1);
		location.href = './user_list.html';
	});
	
	// $(".com-back").click(() => {
	// 	sessionStorage.setItem("addtype", "2");
	// 	sessionStorage.setItem("income_status", 2);
	// 	location.href = './user_list.html';
	// });
	
	
	// =======业者用户============
	$(".free-wait").click(() => {
		sessionStorage.setItem("addtype", "1");
		sessionStorage.setItem("income_status", 0);
		location.href = './user_list.html';
	});
	
	$(".free-pass").click(() => {
		sessionStorage.setItem("addtype", "1");
		sessionStorage.setItem("income_status", 1);
		location.href = './user_list.html';
	});
	
	// $(".free-back").click(() => {
	// 	sessionStorage.setItem("addtype", "1");
	// 	sessionStorage.setItem("income_status", 2);
	// 	location.href = './user_list.html';
	// });
	
	// =======合作伙伴============
	$(".coop-wait").click(() => {
		sessionStorage.setItem("addtype", "11");
		sessionStorage.setItem("income_status", 0);
		location.href = './user_list.html';
	});
	
	$(".coop-pass").click(() => {
		sessionStorage.setItem("addtype", "11");
		sessionStorage.setItem("income_status", 1);
		location.href = './user_list.html';
	});
	
	// $(".coop-back").click(() => {
	// 	sessionStorage.setItem("addtype", "11");
	// 	sessionStorage.setItem("income_status", 2);
	// 	location.href = './user_list.html';
	// });
	
	
	// 请求数据的函数
	function getInfo(enterType) {
		console.log('发起了请求')
		enterType = enterType.toString()
		
		mui.post(urlDns + "/control_app/ms/fr/user/main",{
		    // 2.有单位  1.业者用户  11.合作伙伴
		    tel_app:tel_app,
		    pass_app:pass_app,
		    code_app:code_app,
				usertype: enterType
		},function(data){
			console.log("请求成功了")
			console.log(JSON.stringify(data))
			if (data.result == 0) {
				// 需要重新登录
				if (window.plus) {
					goToLogin("../../../page/register/login.html");
				} 
				else {
					document.addEventListener('plusready', goToLogin, false);
				}
			} 
			else {
				if(data.res_size > 0) {
					$(".mybadge").css("display","inline-block")
					$(".mybadge").text(data.res_size)
				}
				else { $(".mybadge").css("display","none") }

				// 单位用户
				if(enterType == '2') {
					$(".com-wait-li").text(data.res_size);
					$(".com-pass-li").text(data.pass_size);
					// $(".com-back-li").text(data.yz_pass);
				}
			
				// 业者用户
				if(enterType == '1') {
					$(".free-wait-li").text(data.res_size);
					$(".free-pass-li").text(data.pass_size);
					// $(".free-back-li").text(data.ms_pass);
				}
				
				// 合作伙伴
				if(enterType == '11') {
					$(".free-wait-li").text(data.res_size);
					$(".free-pass-li").text(data.pass_size);
					// $(".free-back-li").text(data.ms_pass);
				}
			
			}
		})
	}
</script>

</html>