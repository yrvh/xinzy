<!DOCTYPE html>
<html lang="">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="../../../js/mui.min.js"></script>
    <link rel="stylesheet" href="../../../css/mui.min.css">
    <title>用户状态统计</title>
    <script>
        mui.init();
    </script>
		
		<style type="text/css">
			body {
			    margin: 0;
			    padding: 0;
			    color: #333333;
			}
			
			header {
			    position: fixed;
			    top: 0;
			    left: 0;
			    z-index: 99;
			    text-align: center;
			    line-height: 44px;
			    width: 100%;
			    height: 44px;
			    font-weight: bold;
			    background-color: white;
			    box-shadow: 0 2px 2px 0 rgba(231, 231, 231, 1);
			}
			
			header>img {
			    position: absolute;
			    top: 12px;
			    left: 5px;
			    width: 20px;
			    height: 20px;
			}
			
			header>div {
			    position: absolute;
			    top: 0;
			    right: 5px;
			    height: 44px;
			    line-height: 44px;
			}
			
			.next {
			    line-height: 44px;
			    color: #7EB6FF;
			    margin-right: 10px;
			}
			
			.userTypeBox{
			    position: fixed;
			    top: 44px;
			    left: 0;
			    z-index: 99;
			    width: 100%;
			    height: 45px;
			    background-color: white;
			    display: flex;
			    justify-content: space-around;
			}
			
			.userTypeBox div{
			    line-height: 45px;
			    
			    box-sizing: border-box;
			}
			
			.user_all{
			    border-bottom: 3px solid #7EB6FF;
			}
			.user_com,.user_free,.user_coop{
			    border: none;
			}
			.user_numTip{
			    position: fixed;
			    top: 88px;
			    left: 0;
			    z-index: 99;
			    width: 100%;
			    height: 30px;
			    line-height: 30px;
			    font-size: 14px;
			    padding: 0 15px;
			    display: flex;
			    justify-content: space-between;
			    background-color: #efeff4;
			}
			
			.inserver{
			    position: fixed;
			    top: 118px;
			    left: 0;
			    z-index: 99;
			    width: 100%;
			    height: 46px;
			    padding: 0 15px;
			    line-height: 46px;
			    background-color: white;
			    display: flex;
			    justify-content: space-between;
			}
			
			
			
			.com_ul,.free_ul,.coop_ul {
			    list-style: none;
			    padding: 0;
					margin-top: 0;
					margin-bottom: 15px;
			}
			
			li {
			    display: flex;
			    justify-content: space-between;
			    width: 100%;
			    height: 46px;
			    background-color: white;
			    margin-bottom: 2px;
			    line-height: 46px;
			    padding: 0 5px 0 15px;
			    box-sizing: border-box;
			}
			
			li img {
			    width: 25px;
			    height: 25px;
			    vertical-align: middle;
			}
			
			li>div>span {
			    color: rgb(153, 153, 153);
			}
			
			.place {width: 100%; height: 119px;}
		</style>
</head>

<body>
    <header>
        <img class="back" src="../../../img/back_black.png" alt=""> 用户状态统计
        <!-- <div class="next">新增</div> -->
    </header>
    <div class="userTypeBox">
        <div class="user_all">全部</div>
        <div class="user_com">单位用户</div>
        <div class="user_free">业者用户</div>
        <div class="user_coop">合作伙伴</div>
        <!-- <div class="tip"></div> -->
    </div>

    <div class="user_numTip">
        <div>用户名称</div>
        <div>用户数量: <span>6</span></div>
    </div>
		<div class="place"></div>
		<ul class="com_ul">
			<li class="cominfo">
			    <span>北海农夫山泉集团</span>
			    <div>
			        <span class="pass">1872220000</span>
			        <img src="../../../img/next.png" alt="">
			    </div>
			</li>
			<li class="cominfo">
			    <span>北海娃哈哈集团</span>
			    <div>
			        <span class="pass">1872220000</span>
			        <img src="../../../img/next.png" alt="">
			    </div>
			</li>
		</ul>
		
		<ul class="free_ul">
			<li class="freeinfo">
			    <span>张可可</span>
			    <div>
			        <span class="pass">1872220000</span>
			        <img src="../../../img/next.png" alt="">
			    </div>
			</li>
			<li class="freeinfo">
			    <span>李四</span>
			    <div>
			        <span class="pass">1872220000</span>
			        <img src="../../../img/next.png" alt="">
			    </div>
			</li>
		</ul>
		
		<ul class="coop_ul">
			<li class="coopinfo">
			    <span>马建军</span>
			    <div>
			        <span class="pass">1872220000</span>
			        <img src="../../../img/next.png" alt="">
			    </div>
			</li>
			<li class="coopinfo">
			    <span>马建军</span>
			    <div>
			        <span class="pass">1872220000</span>
			        <img src="../../../img/next.png" alt="">
			    </div>
			</li>
		</ul>


</body>
<script src="../../../js/jquery-3.3.1.js"></script>
<script src="../../../js/urlDns.js"></script>

<script type="text/javascript">
	var pass_app = localStorage.getItem("pass_app");
	var tel_app = localStorage.getItem("tel_app");
	var code_app = localStorage.getItem("code_app");
	
	// 返回
	$(".back").click(() => {
	    history.back();
	})
	
	$.post(urlDns + "/control_app/ms/fr/user/userCount", {
	    usertype: "2",
	    tel_app: tel_app,
	    pass_app: pass_app,
	    code_app: code_app
	}, function (data) {
	    console.log(JSON.stringify(data))
	    $(".user_num").text(data.dw_8);
	    $(".com_djlqr").text(data.dw_6);
	    $(".com_dzgsh").text(data.dw_1);
	    $(".com_zgshth").text(data.dw_11);
	    $(".com_dwszl").text(data.dw_3);
	    $(".com_ddwqr").text(data.dw_2);
	    $(".com_dwth").text(data.dw_22);
	})
	
	$(".user_all").click(() => {
	    // 全部
	    $(".user_all").css("border-bottom", "3px solid #7EB6FF")
	    $(".user_com").css("border", "none")
	    $(".user_free").css("border", "none")
	    $(".user_coop").css("border", "none")
			$(".com_ul").css("display","block")
			$(".free_ul").css("display","block")
			$(".coop_ul").css("display","block")
	
	    $.post(urlDns + "/control_app/ms/fr/user/list", {
	        tel_app: tel_app,
	        pass_app: pass_app,
	        code_app: code_app,
	        page: "1", //第几页
	        rows: "20",  //页数大小
	        tel: "",//搜索字段
	        usertype: "",//用户类型1.业者  2.单位    11  合作伙伴
	        status: "1" //1.审核通过      0.注册当中
	    }, function (data) {
	        console.log(JSON.stringify(data))
	        var htmlStr = "";
	        for (var i = 0; i < data.rows.length; i++) {
	            htmlStr += `
	            <li class="" user_id="${data.rows[i].id}">
	                <span>张三</span>
	                <div>
	                    <span class="com_djlqr">1384785486</span>
	                    <img src="../../../img/next.png" alt="">
	                </div>
	            </li>
	            
	            `;
	        }
	    })
	})
	$(".user_com").click(() => {
	    // 单位
	    $(".user_com").css("border-bottom", "3px solid #7EB6FF")
	    $(".user_all").css("border", "none")
	    $(".user_free").css("border", "none")
	    $(".user_coop").css("border", "none")
			$(".com_ul").css("display","block")
			$(".free_ul").css("display","none")
			$(".coop_ul").css("display","none")
	
	    $.post(urlDns + "/control_app/ms/fr/user/userCount", {
	        usertype: "2",
	        tel_app: tel_app,
	        pass_app: pass_app,
	        code_app: code_app
	    }, function (data) {
	        console.log(JSON.stringify(data))
	        $(".user_num").text(data.dw_8);
	        $(".com_djlqr").text(data.dw_6);
	        $(".com_dzgsh").text(data.dw_1);
	        $(".com_zgshth").text(data.dw_11);
	        $(".com_dwszl").text(data.dw_3);
	        $(".com_ddwqr").text(data.dw_2);
	        $(".com_dwth").text(data.dw_22);
	    })
	})
	$(".user_free").click(() => {
	    // 业者
	    $(".user_free").css("border-bottom", "3px solid #7EB6FF")
	    $(".user_com").css("border", "none")
	    $(".user_all").css("border", "none")
	    $(".user_coop").css("border", "none")
			$(".com_ul").css("display","none")
			$(".free_ul").css("display","block")
			$(".coop_ul").css("display","none")
	
	    $.post(urlDns + "/control_app/ms/fr/user/userCount", {
	        usertype: "1",
	        tel_app: tel_app,
	        pass_app: pass_app,
	        code_app: code_app
	    }, function (data) {
	        console.log(JSON.stringify(data))
	        $(".user_num").text(data.yz_8);
	        $(".free_dshfwf").text(data.yz_1);
	        $(".free_fwfybtg").text(data.yz_11);
	        $(".free_dszfwf").text(data.yz_111);
	        $(".free_ddwqr").text(data.yz_5);
	        $(".free_dwth").text(data.yz_55);
	        $(".free_dwsfrxx").text(data.yz_33);
	        $(".free_dqrgrxx").text(data.yz_2);
	        $(".free_grxxbtg").text(data.yz_22);
	        $(".free_dwszl").text(data.yz_3);
	        $(".free_dzgsh").text(data.yz_7);
	        $(".free_zgth").text(data.yz_77);
	        $(".free_dyzqrzl").text(data.yz_4);
	        $(".free_yzth").text(data.yz_44);
	    })
	})
	$(".user_coop").click(() => {
	    // 合作伙伴
	    $(".user_coop").css("border-bottom", "3px solid #7EB6FF")
	    $(".user_com").css("border", "none")
	    $(".user_free").css("border", "none")
	    $(".user_all").css("border", "none")
			$(".com_ul").css("display","none")
			$(".free_ul").css("display","none")
			$(".coop_ul").css("display","block")
	
	    $.post(urlDns + "/control_app/ms/fr/user/userCount", {
	        usertype: "11",
	        tel_app: tel_app,
	        pass_app: pass_app,
	        code_app: code_app
	    }, function (data) {
	        console.log(JSON.stringify(data))
	        $(".user_num").text(data.hhr_8);
	        $(".cooper_dshfwf").text(data.hhr_1);
	        $(".cooper_fwfybtg").text(data.hhr_11);
	        $(".cooper_dwsgrxx").text(data.hhr_33);
	        $(".cooper_dqrgrxx").text(data.hhr_2);
	        $(".cooper_grxxbtg").text(data.hhr_22);
	        $(".cooper_dwszl").text(data.hhr_3);
	        $(".cooper_dzgsh").text(data.hhr_7);
	        $(".cooper_zgth").text(data.hhr_77);
	        $(".cooper_dhzhbqrzl").text(data.hhr_4);
	        $(".cooper_hzhbth").text(data.hhr_44);
	    })
	})
	
	
	// 点击单位用户的item项  跳到该公司的详情页
	// $(".freeinfo").click(() => {
	// 	// location.href = './ttt'
	// 	console.log('ni好')
	// })
	
	//扩展API完成后执行的操作
	function plusReady() {
	    // 点击接受服务单位
	    // .on后面加进来的元素不起作用，要用事件代理来解决
	    $(document).on("click", ".free_ul .freeinfo", function(e) {
	        // alert(1111)
	        // console.log(111)
	        // console.log($(this).attr("id"));
	
	        // 选中单位的ID
	        var comids = $(this).attr("id");
	        sessionStorage.setItem('comids', comids);
	        page.chooseType();
	    });
	}
	
	
	//弹出系统按钮选择框
	var page = null;
	page = {
	    chooseType: function() {
	        var m = this;
	        /* console.log(m);*/
	        plus.nativeUI.actionSheet({
	            cancel: "取消",
	            // title: "请选择要查看的信息",
	            buttons: [
	                { title: "个人信息" },
	                { title: "个体工商户信息" },
									{ title: "收入纳税信息" },
	            ]
	        }, function(e) { //1 是拍照  2 从相册中选择 
	            switch (e.index) {
	                case 1:
										location.href = "./onLineContract_acceptCom.html";
										break;
	                case 2:
										location.href = "./onLineContract_acceptCom.html";
										break;
									case 3: 
										location.href = "./"
										break
	            }
	        });
	    }
	}
	
	//扩展API是否准备好，如果没有准备好  则监听plusReady 
	if (window.plus) {
	    plusReady();
	} else {
	    document.addEventListener("plusready", plusReady, false);
	}
</script>


</html>